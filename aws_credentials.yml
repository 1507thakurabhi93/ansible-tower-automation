---
- name: Play to prepare tower for Credentials upload for demo
  hosts: localhost
  vars:
    tower_url: tower1.{{guid}}.example.opentlc.com
    tower_pass: "{{tower_password}}"
    readonly_access_key: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          39613830346231663337646635643233333761386164663036626232306363393337383661663930
          6632316439306166666330326466626630616132333939350a363063643531356439343064383335
          33326466353231383766623038393162373662616165353533313334313166623437383862393262
          3036323463613265340a313664316230656365306537336530626537373832396437333336653532
          63356636353535383165353864346464383232656538373233316362626639626434
    readonly_secret_key: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          32346462383436393963613366333635316530393136666438333234303230363832306636373565
          3535306236363638343833663863313830306132613330350a633961636231383566376332633631
          33313330343239323632623536376532633237633432613061653864396532313561666535383637
          3161313762666261610a626132346438623330633932363237656565303734663434356164363233
          34306261613933643965353137376232343036376539343037373333373131643039383966386533
          6362656537643533313663343935323034366566343561336230
    
  tasks:
  
    - name: Tower host aws credential
      tower_credential:
        name:               Aws_Credential
        description:        aws key
        organization:       Default
        kind:               aws
        state:              present
        username:  "{{readonly_access_key}}"
        password:  "{{readonly_secret_key}}"
        tower_host: "{{ tower_url }}"  
        tower_username: admin
        tower_password: "{{tower_pass}}"
        tower_verify_ssl: false

